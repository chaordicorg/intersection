<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
	<title>jquery.intersection.js デモ</title>

	<!-- css  -->
	<link rel="stylesheet" href="sample.css">
	<style>
		article{ margin-bottom: 40px; }
		h1{ padding-bottom: 20px; }
	</style>

	<!-- Bootstrap & jQuery -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

	<!-- IE11対策(Polyfill) -->
	<script type="text/javascript" >
	if (navigator.userAgent.indexOf('msie') >= 0 || navigator.userAgent.indexOf('Trident') >= 0){
		var el = document.createElement('script');
		el.src = "./intersection-observer.js";
		document.getElementsByTagName('head')[0].appendChild(el);	// HEAD要素の最後に追加
	}
	</script>

	<!-- jquery.intersection.js -->
	<script src="./jquery.intersection.min.js"></script>
	<script>
	$(function(){
		$('body').intersection({
			"root": null,
			"rootMargin": "0px 0px -50% 0px",
			"threshold": 0,
			"target": ".box",		// 交差を監視する要素
			callback: function(_dom){

				// すでにアクティブになっている目次を選択
				var $currentActiveIndex = $("#indexList .active");

				// すでにアクティブになっているものが0個の時（=null）以外は、activeクラスを除去
				if ($currentActiveIndex !== null) {
					$currentActiveIndex.removeClass("active");
				}

				// 引数で渡されたDOMが飛び先のaタグを選択し、activeクラスを付与
				$('a[href="#' + _dom.id + '"]').addClass("active");

				// アニメーション
				anime({
					targets: '#' + _dom.id,
					rotate: '1turn',
					duration: 5000,
					complete: function(e){
						console.log('complete !!');
					},
				});
			}
		});

		$('body').intersection({
			"root": null,
			"rootMargin": "0px 0px -100% 0px",
			"threshold": 0,
			"target": ".box2",		// 交差を監視する要素
			callback: function(_dom){
				console.log(_dom);

				// すでにアクティブになっている目次を選択
				var $currentActiveIndex = $("#indexList .active");

				// すでにアクティブになっているものが0個の時（=null）以外は、activeクラスを除去
				if ($currentActiveIndex !== null) {
					$currentActiveIndex.removeClass("active");
				}

				// 引数で渡されたDOMが飛び先のaタグを選択し、activeクラスを付与
				$('a[href="#' + _dom.id + '"]').addClass("active");

				// アニメーション
				console.log(_dom.id);
				// $('#' + _dom.id).addClass("animated swing");
				anime({
					targets: '#' + _dom.id,
					//translateX: 250,
					rotate: '1turn',
					duration: 5000,
					complete: function(e){
						console.log('complete !!');
					},
				});
			}
		});
	});
	</script>
</head>



<body>
<section id="hakari">
	<div>0px</div>
	<div>100px</div>
	<div>200px</div>
	<div>300px</div>
	<div>400px</div>
	<div>500px</div>
	<div>600px</div>
	<div>700px</div>
	<div>800px</div>
	<div>900px</div>
	<div>1000px</div>
</section>

<div class="container">

	<h5>■ jquery.intersection.js</h5>
	<article>
		<a href="./">| 使い方 </a>
		| サンプル 
		<a href="https://github.com/chaordicorg/*****" target="_blank">| ダウンロード |</a>
	</article>

	<div class="wrapper">



		<aside class="indexWrapper">
			<h1>目次</h1>
			<ol id="indexList" class="index">
				<li><a href="#index1">Action</a></li>
				<li><a href="#index2">Sf </a></li>
				<li><a href="#index3">Comedy</a></li>
				<li><a href="#index4">Horror</a></li>
				<li><a href="#index5">Juvenile</a></li>
			</ol>
		</aside>




		<main class="contents">

			<article id="intro">
				intro
			</article>

			<!-- index1 -->
			<div class="box" id="index1">
				<h1>Action</h1>
				<p>("rootMargin": "0px 0px -50% 0px")</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>

				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					<img src="./img/img1.jpg" alt="" width="720" height="480" />
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
			</div>



			<!-- index2 -->
			<div class="box" id="index2">
				<h1>Sf</h1>
				<p>("rootMargin": "0px 0px -50% 0px")</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					<img src="./img/img2.jpg" alt="" width="720" height="480" />
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>

				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
			</div>



			<!-- index3 -->
			<div class="box2" id="index3">
				<h1>Comedy</h1>
				<p>("rootMargin": "0px 0px -100% 0px")</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					<img src="./img/img3.jpg" alt="" width="720" height="480" />
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
			</div>



			<!-- index4 -->
			<div class="box2" id="index4">
				<h1>Horror</h1>
				<p>("rootMargin": "0px 0px -100% 0px")</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					<img src="./img/img4.jpg" alt="" width="720" height="480" />
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
			</div>



			<!-- index5 -->
			<div class="box" id="index5">
				<h1>Juvenile</h1>
				<p>("rootMargin": "0px 0px -50% 0px")</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					<img src="./img/img5.jpg" alt="" width="720" height="480" />
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit.
					Accusantium asperiores expedita minus nisi praesentium provident
					quisquam repellat sapiente ut vitae. Aut corporis deleniti deserunt
					eos error facere, maiores necessitatibus quo.
				</p>
			</div>



		</main>
	</div>







</div>
</body>
</html>